<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Hi Space | Reset Password</title>
		<style type="text/css">
			body {
				background-color: #f5f5f5;
			}
			input {
				margin-bottom: 10px;
				padding: 10px;
				border: 1px solid #ccc;
				border-radius: 5px;
			}
			input[type="submit"] {
				background-color: #333;
				color: #fff;
				border: none;
				cursor: pointer;
			}
			input[type="submit"]:hover {
				background-color: #555;
			}
		</style>
	</head>
	<body>
		<form
			action="api/reset-password"
			method="post"
			style="
				display: flex;
				flex-direction: column;
				width: 300px;
				margin: 0 auto;
				margin-top: 100px;
			"
		>
			<input
				type="password"
				name="password"
				id="password"
				placeholder="Password"
			/>
			<input
				type="password"
				name="confirmPassword"
				id="confirmPassword"
				placeholder="Confirm Password"
			/>
			<input type="submit" value="Reset Password" />
		</form>

		<script type="text/javascript">
			const form = document.querySelector("form");
			form.addEventListener("submit", (e) => {
				e.preventDefault();
        const rootUrl = window.location.origin;
        const token = window.location.pathname.split("/")[2];
				const email = document.querySelector("#email").value;
				const password = document.querySelector("#password").value;
				const confirmPassword =
					document.querySelector("#confirmPassword").value;
				const data = {
					email,
					password,
					confirmPassword,
				};
				fetch(`${rootUrl}/api/reset-password/${token}`, {
					method: "POST",
					headers: {
						"Content-Type": "application/json",
					},
					body: JSON.stringify(data),
				})
					.then((res) => res.json())
					.then((data) => {
						// create toast
						const toast = document.createElement("div");
						toast.classList.add("toast");
						toast.textContent = data.message;
						document.body.appendChild(toast);
						// remove toast after 3 seconds
						setTimeout(() => {
							toast.remove();
						}, 3000);
					});
			});
		</script>
	</body>
</html>
